# HTML Content Verification Reports

This directory contains automated HTML content verification reports generated by `compare-html.ts`.

## Purpose

These reports verify **content integrity**, not structural parity. The goal is to ensure that:

1. **Semantic HTML elements exist** - Proper use of h1-h6, nav, main, footer, header
2. **Key content is present** - Company name, contact information, page titles
3. **Meta information exists** - Descriptions for SEO

**Note:** This is NOT about matching the old site's HTML structure. The new site has an intentionally different design. We're verifying that important CONTENT exists, regardless of how it's structured.

## Report Format

Two report formats are generated for each run:

### Text Report (`.txt`)

Human-readable report with:

- Summary section with overall statistics
- Per-page breakdown showing:
  - Semantic elements (h1-h6, nav, main, footer, header, article) with counts
  - Content verification (company name, titles, contact info, meta description)
  - Issues found (MISSING items)

Example output:
```
======================================================================
HTML CONTENT VERIFICATION REPORT
======================================================================

SUMMARY
----------------------------------------------------------------------
Pages Checked:     13
Pages Passed:      9
Pages with Issues: 4
Total Findings:    4
Critical Issues:   4

----------------------------------------------------------------------
PAGE: home
URL:  /
----------------------------------------------------------------------

Semantic Elements:
  [OK] h1 - Exactly one h1 found
  [OK] nav - 2 nav element(s) found
  [OK] main - 1 main element(s) found
  ...

Content Verification:
  [OK] Company Name         - Company name found in body
  [MISSING] Title Match     - Expected title "Home" but h1 is "..."
  [OK] Contact Info         - Phone: Y, Email: Y, Address: Y
  ...
```

### JSON Report (`.json`)

Structured data for programmatic access:

```json
{
  "timestamp": "2026-02-05T03:27:16.076Z",
  "duration": "44348ms",
  "summary": {
    "pagesChecked": 13,
    "pagesPassed": 9,
    "pagesWithIssues": 4,
    "totalFindings": 4,
    "criticalIssues": 4
  },
  "pages": [
    {
      "slug": "home",
      "url": "/",
      "elements": [...],
      "content": [...],
      "issues": [...]
    }
  ]
}
```

## Running the Comparison

### Prerequisites

The Nuxt dev server must be running on port 3000:

```bash
npm run dev
```

### Generate Reports

In a separate terminal:

```bash
npx tsx .planning/scripts/compare-html.ts
```

The script will:
1. Check that the server is running
2. Load the page list from `.planning/audit/pages.json`
3. Fetch HTML from each page on localhost:3000
4. Verify semantic elements and content
5. Generate timestamped reports in this directory

### Report Naming Convention

Reports are named with timestamps: `YYYY-MM-DD_HH-mm-ss-report.{txt,json}`

Example: `2026-02-05_21-27-16-report.txt`

## Understanding Findings

### Status Indicators

- **OK** - Element or content found as expected
- **MISSING** - Expected content not found (needs attention)
- **WARNING** - Element found but in unexpected quantity (e.g., multiple h1)
- **ERROR** - Failed to load the page

### Semantic Elements Checked

| Element  | Expected    | Description                           |
| -------- | ----------- | ------------------------------------- |
| h1       | Exactly 1   | Primary page heading (SEO critical)   |
| h2-h6    | Any number  | Section headings                      |
| nav      | At least 1  | Navigation container                  |
| main     | At least 1  | Main content area (accessibility)     |
| footer   | At least 1  | Footer content                        |
| header   | At least 1  | Header content                        |
| article  | Optional    | Article container (for blog-style content) |

### Content Checks

| Check           | Description                              |
| --------------- | ---------------------------------------- |
| Company Name    | "VP Associates" or "VPAssociates" found  |
| Title Match     | Page h1 roughly matches expected title   |
| Contact Info    | Phone, email, or address present        |
| Meta Description | SEO meta description exists            |

## Using the Findings

### Fixing Missing Semantic Elements

If a page shows missing elements:

1. Open the page file in `pages/`
2. Add the missing semantic HTML element
3. Re-run the verification script

### Title Mismatches

Title mismatches (e.g., "PORTFOLIO" vs "Our Projects") are expected when the new site uses different wording. These are **not errors** but documentation of the intentional content changes.

### Critical Issues

Critical issues are defined as missing:
- h1 (SEO and accessibility critical)
- main (accessibility landmark)
- nav (navigation structure)
- footer or header (page structure)

## Directory Structure

```
.planning/comparisons/html-reports/
├── README.md                    # This file
├── 2026-02-05_21-27-16-report.txt    # Human-readable report
└── 2026-02-05_21-27-16-report.json   # Machine-readable report
```

## Related Files

- **Script:** `.planning/scripts/compare-html.ts`
- **Page List:** `.planning/audit/pages.json`
- **Baselines:** `.planning/audit/baselines/` (visual screenshots)

## Idempotency

The script is idempotent - you can run it multiple times safely. Each run creates a new timestamped report without overwriting previous ones.

## Troubleshooting

### Server Not Running

If you see:
```
ERROR: Nuxt dev server is not running on http://localhost:3000
```

Start the server:
```bash
npm run dev
```

### Pages Timeout

If some pages timeout during verification, check the browser console output. The script continues even if individual pages fail.

### Empty Reports

If reports show no pages checked, verify that `.planning/audit/pages.json` exists and contains valid page entries.
