# Audit & Baseline Directory

This directory contains the baseline capture of vp-associates.com before any modernization work. Established during Phase 1 of the roadmap, this audit provides a complete visual and structural reference for the original WordPress site.

## Overview

The VP Associates website modernization project begins with a comprehensive audit of the existing site. This directory stores:

1. **Page inventory** (`pages.json`) - Complete list of all pages discovered from the live site
2. **Visual baselines** (`baselines/`) - Screenshot captures of every page at multiple viewports
3. **Capture metadata** (`baselines/metadata.json`) - Documentation of the capture session

These baselines serve as the "before" state for all modernization work. Future phases will compare new implementations against these baselines to ensure visual fidelity and feature parity.

## Directory Structure

```
.planning/audit/
├── pages.json              # Complete page inventory with URLs and metadata
├── baselines/              # Visual screenshots of all pages
│   ├── metadata.json       # Capture session metadata
│   ├── home/
│   │   ├── mobile.png      # 375x812 viewport (iPhone X)
│   │   ├── tablet.png      # 768x1024 viewport (iPad)
│   │   └── desktop.png     # 1920x1080 viewport (Full HD)
│   ├── about/
│   └── ...
└── README.md               # This file
```

## Files

### pages.json

Generated by plan `01-01` (Page Enumeration). Contains all pages discovered from the live WordPress site's sitemap.xml and REST API.

**Structure:**
```json
[
  {
    "url": "https://www.vp-associates.com/",
    "slug": "home",
    "type": "page|home|service|project",
    "lastmod": "ISO-8601 timestamp",
    "source": "sitemap|api",
    "title": "Page title (if available)"
  }
]
```

**Fields:**
- `url`: Full URL of the page on the live site
- `slug`: URL slug used as directory name for baselines
- `type`: Page category (page, home, service, project, etc.)
- `lastmod`: Last modified date from sitemap (when available)
- `source`: How the page was discovered (sitemap.xml or wp/v2 API)
- `title`: Page title from API (when available)

### baselines/

Screenshots captured by plan `01-02` (Visual Baseline Capture) using Playwright with Chromium. Each page has three viewport variants:

- **mobile**: 375x812 (iPhone X dimensions)
- **tablet**: 768x1024 (iPad dimensions)
- **desktop**: 1920x1080 (Full HD)

Screenshots are full-page captures including any scrollable content.

### baselines/metadata.json

Generated by plan `01-03` (Metadata Documentation). Contains complete documentation of the capture session including file sizes, timestamps, and summary statistics.

**Structure:**
```json
{
  "captureDate": "ISO-8601 timestamp",
  "captureTool": "playwright@version",
  "source": "https://www.vp-associates.com",
  "viewports": { /* viewport specifications */ },
  "pages": [
    {
      "slug": "page-slug",
      "url": "full-url",
      "screenshots": { /* relative paths */ },
      "fileSizes": { /* bytes per viewport */ }
    }
  ],
  "summary": {
    "totalPages": 12,
    "totalScreenshots": 36,
    "totalSize": 12488592
  }
}
```

## Viewing Baselines

Open any PNG file directly in an image viewer. Each baseline is named by viewport:

- `mobile.png` - How the page appears on phones
- `tablet.png` - How the page appears on tablets
- `desktop.png` - How the page appears on desktop monitors

For programmatic access, use `metadata.json` which contains relative paths to all screenshots.

## Usage in Comparison Phase

Phase 2 (Comparison Infrastructure) will build tools that:

1. **Capture new screenshots** of the Nuxt implementation at identical viewports
2. **Generate pixel diffs** comparing new vs. baseline screenshots
3. **Highlight differences** showing exactly what changed between implementations
4. **Score similarity** with quantitative metrics for automated regression testing

The baselines in this directory are **immutable**. All comparisons reference these original files. If baselines need regeneration (e.g., source site structure changes), the entire `baselines/` directory should be replaced atomically.

## Regenerating Baselines

If the source site structure changes significantly, baselines can be regenerated:

1. **Refresh page inventory:**
   ```bash
   npx tsx .planning/scripts/enumerate-pages.ts
   ```

2. **Recapture all screenshots:**
   ```bash
   npx tsx .planning/scripts/capture-baselines.ts
   ```

3. **Update metadata:**
   ```bash
   npx tsx .planning/scripts/generate-metadata.ts
   ```

Only regenerate baselines if:
- The source site structure has changed
- New pages have been added to the live site
- Existing pages have been significantly redesigned

## Page Inventory Summary

As of the initial capture:

- **Total pages**: 12
- **Home page**: 1 (home)
- **Main pages**: 5 (services, portfolio, careers, contact, about-3)
- **Gallery pages**: 4 (132, bridges, commercial, misc)
- **System pages**: 2 (uncategorized category, author root)

**Notes:**
- The `about-3` page exhibited timeout issues during capture - may require investigation in Lighthouse audit
- Some low-content pages (gallery sub-pages, category pages) produce minimal screenshots
- The home page has the largest file sizes due to rich imagery and hero content

## Related Documentation

- **Phase 1 Research**: `.planning/phases/01-audit-baseline-capture/01-RESEARCH.md`
- **Requirements**: `.planning/REQUIREMENTS.md` (REQ-AUD-001: Visual baseline, REQ-AUD-002: Page inventory)
- **Roadmap**: `.planning/ROADMAP.md` (Phase 1: Audit & Baseline Capture)
- **Project Overview**: `.planning/PROJECT.md`

## Phase 1 Completion

Phase 1 is complete when:

- [x] All pages enumerated in `pages.json`
- [x] All pages captured at 3 viewports in `baselines/`
- [x] `metadata.json` documents capture session
- [x] This `README.md` provides complete documentation

Upon completion, Phase 2 (Comparison Infrastructure) can begin building diff tools and automated comparison workflows.
