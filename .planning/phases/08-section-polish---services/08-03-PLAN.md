---
phase: 08-section-polish---services
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - pages/services/[slug].vue
  - pages/services/index.vue
autonomous: true

must_haves:
  truths:
    - "All service hero images load from Phase 3 migrated project images"
    - "Hero images use WebP format with proper srcset for responsive loading"
    - "Image loading attribute set to 'eager' for above-fold hero images"
    - "Fallback image (/images/hero/home-header-1920w.webp) loads for unmapped services"
    - "Image paths verified to exist in /public/images/projects/ directory"
    - "No broken images (404 errors) on any service detail page"
  artifacts:
    - path: "pages/services/[slug].vue"
      provides: "Service detail page with verified hero image mappings"
      min_lines: 350
  key_links:
    - from: "pages/services/[slug].vue"
      to: "serviceHeroImages mapping"
      via: "Record<string, string> mapping service slugs to image paths"
      pattern: "serviceHeroImages.*Record"
    - from: "pages/services/[slug].vue"
      to: "/public/images/projects/"
      via: "NuxtImg component with src from mapping"
      pattern: "NuxtImg.*:src.*serviceHeroImage"
---

<objective>
Verify and optimize service hero image mappings using Phase 3 migrated images, ensure all image paths exist and load correctly, and confirm WebP format with responsive srcset usage.

Purpose: Service detail pages use hero images from the Phase 3 project image migration. This task verifies all mappings point to existing files, confirms proper image optimization (WebP format), and ensures fallback behavior works for any unmapped services. No new image downloads needed - all images exist from Phase 3.

Output: Verified service hero image mappings with all paths confirmed existing, proper NuxtImg usage with WebP format and eager loading, and working fallback for unmapped services.
</objective>

<execution_context>
@/home/deck/.claude/get-shit-done/workflows/execute-plan.md
@/home/deck/.claude/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-section-polish---services/08-CONTEXT.md
@.planning/phases/08-section-polish---services/08-RESEARCH.md
@.planning/phases/03-image-migration/03-03-SUMMARY.md
@pages/services/[slug].vue
@pages/services/index.vue
@public/images/image-mapping.json
</context>

<tasks>

<task type="auto">
  <name>Verify all service hero image paths exist in /public/images/projects/</name>
  <files>pages/services/[slug].vue</files>
  <action>
    Verify service hero image mappings from Plan 02 reference existing files:

    1. Check each mapped image file exists:
       Run: ls -la /home/deck/Sites/vp-eng-nuxt/public/images/projects/*.webp

    2. Verify these images exist from Phase 3 migration:
       - steel-connect-1920w.webp
       - lowrise-1920w.webp
       - shallowdeepfoundationdesign10-1920w.webp
       - cad-drawing-1920w.webp
       - inspection-services-1920w.webp
       - shopdrawing-1920w.webp
       - home-header-1920w.webp (fallback in /public/images/hero/)

    3. If any images are missing, add them to serviceHeroImages mapping in pages/services/[slug].vue:
       The mapping created in Plan 02 should be:
       const serviceHeroImages: Record<string, string> = {
         'structural-steel-design': '/images/projects/steel-connect-1920w.webp',
         'concrete-design': '/images/projects/lowrise-1920w.webp',
         'masonry-design': '/images/projects/lowrise-1920w.webp',
         'wood-design': '/images/projects/lowrise-1920w.webp',
         'foundation-design': '/images/projects/shallowdeepfoundationdesign10-1920w.webp',
         'seawall-design': '/images/projects/shallowdeepfoundationdesign10-1920w.webp',
         'steel-connection-design': '/images/projects/steel-connect-1920w.webp',
         'cad-3d-modeling': '/images/projects/cad-drawing-1920w.webp',
         'inspection-services': '/images/projects/inspection-services-1920w.webp',
         'steel-detailing': '/images/projects/shopdrawing-1920w.webp'
       }

       const heroFallback = '/images/hero/home-header-1920w.webp'

    4. Confirm fallback image exists:
       Run: ls -la /home/deck/Sites/vp-eng-nuxt/public/images/hero/home-header*.webp

    5. Note: Multiple services can share the same image (concrete/masonry/wood all use lowrise, foundation/seawall both use shallowdeepfoundationdesign10) - this is intentional to create thematic connections.
  </action>
  <verify>Run ls commands to verify all 6 unique project images exist, verify fallback hero image exists, note any missing files (expected: all exist from Phase 3 migration)</verify>
  <done>All 6 unique project hero images verified existing in /public/images/projects/: steel-connect, lowrise, shallowdeepfoundationdesign10, cad-drawing, inspection-services, shopdrawing. Fallback image home-header-1920w.webp verified in /public/images/hero/</done>
</task>

<task type="auto">
  <name>Verify NuxtImg component usage with proper optimization settings</name>
  <files>pages/services/[slug].vue</files>
  <action>
    Verify NuxtImg component in service detail page header uses proper optimization:

    1. Locate the NuxtImg component in the Page Header section (added in Plan 02)

    2. Verify component has these attributes:
       - :src="serviceHeroImage" - Uses computed image path
       - :alt with dynamic description - Accessibility
       - class="w-full h-full object-cover" - Proper sizing
       - format="webp" - WebP format for optimization
       - loading="eager" - Above-fold content should load immediately
       - width="1920" - Specifies width for responsive sizing
       - height="600" - Specifies height for aspect ratio

    3. If any attributes are missing, add them. The complete NuxtImg should be:
       <NuxtImg
         :src="serviceHeroImage"
         :alt="`${service?.title?.rendered || 'Service'} hero image`"
         class="w-full h-full object-cover"
         format="webp"
         loading="eager"
         width="1920"
         height="600"
       />

    4. Verify @nuxt/image module is installed (should be from Phase 6/7):
       Check: cat package.json | grep "@nuxt/image"

    5. Note: Nuxt 3 auto-imports NuxtImg component - no explicit import needed.
  </action>
  <verify>grep -A 10 "NuxtImg" pages/services/[slug].vue, confirm all required attributes present, confirm @nuxt/image is in package.json</verify>
  <done>NuxtImg component verified with all attributes: src binding, alt text, object-cover class, format="webp", loading="eager", width=1920, height=600. @nuxt/image module confirmed in package.json from prior phases.</done>
</task>

<task type="auto">
  <name>Test all service detail pages for broken images</name>
  <files>pages/services/[slug].vue</files>
  <action>
    Test all 10 service detail pages to verify no broken images:

    1. Start dev server: npm run dev

    2. For each service slug, verify the page loads without 404 errors:
       /services/structural-steel-design
       /services/concrete-design
       /services/masonry-design
       /services/wood-design
       /services/foundation-design
       /services/seawall-design
       /services/steel-connection-design
       /services/cad-3d-modeling
       /services/inspection-services
       /services/steel-detailing

    3. Check browser DevTools Network tab for:
       - No 404 errors for image requests
       - Images load as WebP format
       - Image sizes are reasonable (<200KB for hero)

    4. Verify visual appearance:
       - Hero images display with proper aspect ratio
       - Dark overlay gradient is visible
       - Text remains readable over images

    5. If any 404s found, check serviceHeroImages mapping and fix the path.

    Note: This is verification only - the mapping was created in Plan 02. This task confirms the implementation works.
  </action>
  <verify>npm run dev, visit each of the 10 service detail pages, check DevTools Network tab for 404 errors (should be none), verify images load as WebP, visually verify hero images display with overlay</verify>
  <done>All 10 service detail pages load successfully, no 404 errors for hero images, all images load as WebP format, hero images display with proper aspect ratio and dark overlay, text remains readable over all hero backgrounds</done>
</task>

</tasks>

<verification>
1. All 6 unique project hero images exist in /public/images/projects/
2. Fallback hero image exists in /public/images/hero/
3. NuxtImg component uses format="webp"
4. NuxtImg component uses loading="eager" for above-fold content
5. No 404 errors when loading any service detail page
6. Hero images display with proper aspect ratio
7. Dark overlay gradient ensures text readability
8. Image sizes are optimized (<200KB for hero images)
</verification>

<success_criteria>
- All service hero images verified existing from Phase 3 migration
- Hero image mappings correctly associate each service with project image
- Fallback image configured for unmapped services
- NuxtImg component configured with WebP format
- Loading set to "eager" for above-fold hero images
- No broken images (404s) on any service detail page
- Images display with proper styling and overlay treatment
</success_criteria>

<output>
After completion, create `.planning/phases/08-section-polish---services/08-03-SUMMARY.md`
</output>
