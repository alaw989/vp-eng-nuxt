---
phase: 09-section-polish---about---team
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - public/images/team-1.jpg
  - public/images/team-2.jpg
  - public/images/team-3.jpg
  - public/images/team-4.jpg
  - public/images/team/*.jpg
  - public/images/team/*.webp
  - scripts/optimize-team-photos.ts
autonomous: true

must_haves:
  truths:
    - "Team photo team-4.jpg is reduced from 320KB to under 50KB"
    - "All team photos are under 50KB file size for optimal performance"
    - "Team photos maintain 4:5 aspect ratio for consistent card heights"
    - "WebP format variants created for modern browser support"
    - "Optimized photos stored in /public/images/team/ directory"
  artifacts:
    - path: "public/images/team/"
      provides: "Optimized team member photos in WebP and JPG formats"
      contains: "team-1, team-2, team-3, team-4 with multiple size variants"
    - path: "scripts/optimize-team-photos.ts"
      provides: "Team photo optimization script using Sharp"
      min_lines: 40
  key_links:
    - from: "scripts/optimize-team-photos.ts"
      to: "public/images/team-*.jpg"
      via: "Sharp image processing pipeline"
      pattern: "sharp.*resize.*webp"
    - from: "server/api/team.get.ts"
      to: "public/images/team/"
      via: "Photo path references in static fallback data"
      pattern: "photo.*images/team"
---

<objective>
Optimize all team member photos to meet web performance targets (under 50KB each) while maintaining visual quality and proper aspect ratios for consistent card display.

Purpose: Team photos are critical for the About page's professional appearance. Currently, team-4.jpg is 320KB which significantly degrades page load performance. All team photos should be optimized to 20-50KB target size with WebP format for modern browsers and proper 4:5 aspect ratio to match the TeamMember component's aspect-[4/5] container.

Output: Optimized team photos in /public/images/team/ directory with multiple size variants (640w, 800w), WebP primary format with JPG fallback, all files under 50KB, and a reusable optimization script for future team photos.
</objective>

<execution_context>
@/home/deck/.claude/get-shit-done/workflows/execute-plan.md
@/home/deck/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-section-polish---about---team/09-RESEARCH.md
@public/images/team-1.jpg
@public/images/team-2.jpg
@public/images/team-3.jpg
@public/images/team-4.jpg
@server/api/team.get.ts
</context>

<tasks>

<task type="auto">
  <name>Create team photo optimization script using Sharp</name>
  <files>scripts/optimize-team-photos.ts</files>
  <action>
    Create a team photo optimization script at scripts/optimize-team-photos.ts:

    1. Install Sharp if not already installed:
       npm install --save-dev sharp

    2. Create the optimization script with:
       - Import sharp and filesystem modules
       - Define input directory (public/images/)
       - Define output directory (public/images/team/)
       - Define team photo array: ['team-1.jpg', 'team-2.jpg', 'team-3.jpg', 'team-4.jpg']
       - Target specifications:
         * Max width: 800px (sufficient for card display and retina)
         * Aspect ratio: 4:5 (0.8) enforced via crop if needed
         * Format: WebP primary, JPG fallback
         * Quality: 85 for WebP, 85 for JPG
         * Target file size: under 50KB

    3. Script structure:
       ```typescript
       import sharp from 'sharp'
       import { readdirSync, mkdirSync, existsSync } from 'fs'
       import { join } from 'path'

       const inputDir = './public/images'
       const outputDir = './public/images/team'
       const teamPhotos = ['team-1.jpg', 'team-2.jpg', 'team-3.jpg', 'team-4.jpg']

       // Create output directory if not exists
       if (!existsSync(outputDir)) {
         mkdirSync(outputDir, { recursive: true })
       }

       async function optimizeTeamPhotos() {
         for (const photo of teamPhotos) {
           const inputPath = join(inputDir, photo)
           const outputName = photo.replace('.jpg', '')

           console.log(`Processing ${photo}...`)

           // Get metadata
           const metadata = await sharp(inputPath).metadata()
           console.log(`  Original: ${metadata.width}x${metadata.height}`)

           // Calculate dimensions for 4:5 aspect ratio
           // If width is 800, height should be 1000
           const targetWidth = 800
           const targetHeight = 1000

           // Resize to fit within 800x1000 maintaining aspect ratio
           // Then center-crop to exact 4:5 if needed
           const image = sharp(inputPath)
             .resize(targetWidth, targetHeight, {
               fit: 'cover',
               position: 'center'
             })

           // Generate WebP variant
           await image
             .clone()
             .webp({ quality: 85 })
             .toFile(join(outputDir, `${outputName}-800w.webp`))

           // Generate JPG fallback
           await image
             .clone()
             .jpeg({ quality: 85 })
             .toFile(join(outputDir, `${outputName}-800w.jpg`))

           // Generate smaller mobile variant (640w)
           const mobileWidth = 640
           const mobileHeight = 800
           const mobileImage = sharp(inputPath)
             .resize(mobileWidth, mobileHeight, {
               fit: 'cover',
               position: 'center'
             })

           await mobileImage
             .webp({ quality: 85 })
             .toFile(join(outputDir, `${outputName}-640w.webp`))

           await mobileImage
             .jpeg({ quality: 85 })
             .toFile(join(outputDir, `${outputName}-640w.jpg`))

           // Output file sizes
           const webpSize = (await sharp(join(outputDir, `${outputName}-800w.webp`)).metadata()).size
           const jpgSize = (await sharp(join(outputDir, `${outputName}-800w.jpg`)).metadata()).size

           console.log(`  WebP (800w): ${(webpSize / 1024).toFixed(1)}KB`)
           console.log(`  JPG (800w): ${(jpgSize / 1024).toFixed(1)}KB`)
         }
       }

       optimizeTeamPhotos().catch(console.error)
       ```

    4. Add npm script to package.json for future use:
       "optimize:team": "tsx scripts/optimize-team-photos.ts"
  </action>
  <verify>scripts/optimize-team-photos.ts file exists, contains Sharp imports, processes all 4 team photos, generates WebP and JPG variants at 640w and 800w sizes</verify>
  <done>Optimization script created with Sharp dependency, processes team-1 through team-4 photos, generates WebP primary and JPG fallback variants at 640w and 800w sizes, enforces 4:5 aspect ratio via cover fit, outputs to /public/images/team/ directory</done>
</task>

<task type="auto">
  <name>Run optimization and verify file sizes</name>
  <files>public/images/team/*</files>
  <action>
    Run the team photo optimization script and verify results:

    1. Run the optimization script:
       npx tsx scripts/optimize-team-photos.ts
       Or: npm run optimize:team (if script was added to package.json)

    2. Verify all output files were created in /public/images/team/:
       Expected files:
       - team-1-640w.webp, team-1-640w.jpg, team-1-800w.webp, team-1-800w.jpg
       - team-2-640w.webp, team-2-640w.jpg, team-2-800w.webp, team-2-800w.jpg
       - team-3-640w.webp, team-3-640w.jpg, team-3-800w.webp, team-3-800w.jpg
       - team-4-640w.webp, team-4-640w.jpg, team-4-800w.webp, team-4-800w.jpg

    3. Check file sizes:
       ls -lh public/images/team/

    4. Verify all files are under 50KB:
       - WebP files should be 15-40KB typically
       - JPG fallbacks should be 20-50KB
       - Original team-4.jpg was 320KB, should now be ~30-40KB

    5. If any file exceeds 50KB, consider:
       - Reducing quality to 80 or 75
       - Reducing max width to 700px
       - Check if source image has excessive metadata

    6. Test optimized images in browser:
       - Open http://localhost:3000/about
       - Verify team photos load correctly
       - Check Network tab in DevTools for actual file sizes
       - Verify aspect ratios are consistent (no jagged card heights)
  </action>
  <verify>All 16 files created (4 photos x 4 variants), all files under 50KB, team-4 WebP reduced from 320KB to under 50KB, images display correctly on About page with consistent aspect ratios</verify>
  <done>Optimization script executed successfully, 16 optimized files created in /public/images/team/, all files under 50KB target, team-4 reduced from 320KB to ~30-40KB range, images load on About page with consistent 4:5 aspect ratios, no layout shift from inconsistent image sizes</done>
</task>

</tasks>

<verification>
1. Build completes without errors: npm run build
2. Sharp dependency installed in package.json
3. Optimization script exists at scripts/optimize-team-photos.ts
4. All 16 optimized files created in /public/images/team/
5. All WebP files under 50KB
6. All JPG fallbacks under 50KB
7. team-4.jpg original (320KB) now optimized to ~30-40KB
8. Images display correctly on About page
9. Aspect ratios are consistent (4:5) across all team photos
10. No layout shift from inconsistent image dimensions
</verification>

<success_criteria>
- Team photo optimization script created using Sharp
- All team photos optimized to under 50KB file size
- WebP primary format with JPG fallback for each photo
- Multiple size variants generated (640w, 800w)
- 4:5 aspect ratio enforced for consistent card heights
- team-4.jpg reduced from 320KB to under 50KB (90%+ reduction)
- Images display correctly on About page with consistent sizing
- No layout shift from inconsistent image dimensions
</success_criteria>

<output>
After completion, create `.planning/phases/09-section-polish---about---team/09-02-SUMMARY.md`
</output>
