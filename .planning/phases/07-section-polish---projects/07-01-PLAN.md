---
phase: 07-section-polish---projects
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - pages/projects/index.vue
  - components/ProjectCard.vue
autonomous: true

must_haves:
  truths:
    - "Projects listing page displays projects in responsive grid layout with pagination"
    - "Grid/list view toggle allows users to switch between card and list layouts"
    - "Category filter buttons (pills) are positioned above grid and show active state"
    - "Filter selection updates URL query param (?category=commercial) for shareability"
    - "Sorting dropdown works (newest/oldest/a-z/za) and updates results immediately"
    - "Results count displays correctly when filters are applied"
    - "Pagination controls allow navigation between pages (6-12 items per page)"
    - "Page number updates URL query param (?page=1) for shareability"
    - "Filter changes reset pagination to page 1"
  artifacts:
    - path: "pages/projects/index.vue"
      provides: "Projects listing page with filtering, sorting, view toggle, and pagination"
      min_lines: 350
    - path: "components/ProjectCard.vue"
      provides: "Project card component with image, title, category, location metadata"
      min_lines: 60
  key_links:
    - from: "pages/projects/index.vue"
      to: "route.query"
      via: "useRoute() composable for URL state sync"
      pattern: "route\.query\.(category|page)"
    - from: "pages/projects/index.vue"
      to: "navigateTo"
      via: "URL update on filter/sort/pagination change"
      pattern: "navigateTo.*query"
---

<objective>
Polish projects listing page with grid/list toggle, category pill buttons, proper URL-based filtering state, pagination (6-12 items per page), and verified sorting functionality.

Purpose: The projects listing page is the primary browse interface for the portfolio. Users need to filter by category, sort by various criteria, toggle between grid and list views, and navigate through paginated results. URL state ensures filters and page position survive page reloads and are shareable.

Output: Enhanced projects listing page with working grid/list toggle, pill-style category filters, URL-based state, pagination controls, and responsive card layout.
</objective>

<execution_context>
@/home/deck/.claude/get-shit-done/workflows/execute-plan.md
@/home/deck/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-section-polish---projects/07-CONTEXT.md
@pages/projects/index.vue
@components/ProjectCard.vue
@components/ServiceCard.vue
</context>

<tasks>

<task type="auto">
  <name>Add grid/list view toggle to projects listing page</name>
  <files>pages/projects/index.vue</files>
  <action>
    Modify pages/projects/index.vue to add view toggle:

    1. Add view state ref above filters (after line 283):
       const viewMode = ref<'grid' | 'list'>((route.query.view as string) === 'list' ? 'list' : 'grid')

    2. Add view toggle button between filter bar and results count (around line 119):
       - Place in right-aligned flex container
       - Two icon buttons: grid icon (mdi:view-grid) and list icon (mdi:view-list)
       - Active view gets primary bg, inactive gets neutral border
       - On click, update viewMode ref and URL query param

    3. Update URL when view changes:
       navigateTo({ query: { ...route.query, view: viewMode.value } }, { replace: true })

    4. Apply conditional classes to projects grid (line 128):
       - Grid mode: existing 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8'
       - List mode: 'grid grid-cols-1 gap-6'
       - Add transition classes for smooth mode switch

    5. Add ProjectCard layout variant for list mode:
       - Pass :view-mode prop to ProjectCard
       - In list mode, card shows horizontal layout (image left, content right)
       - Modify ProjectCard.vue to accept and use viewMode prop
  </action>
  <verify>npm run dev, navigate to http://localhost:3000/projects, click grid/list toggle, verify layout changes and URL updates with ?view=list</verify>
  <done>Grid/list toggle positioned above cards, layout switches between 3-column grid and single-column list, URL updates with ?view parameter, toggle state persists on page reload</done>
</task>

<task type="auto">
  <name>Style category filter buttons as pills and verify URL state</name>
  <files>pages/projects/index.vue</files>
  <action>
    Verify and refine category filter styling (lines 19-34):

    1. Confirm pill-style button classes exist:
       - Base: 'px-6 py-2.5 rounded-full font-semibold transition-all duration-300'
       - Active: 'bg-primary text-white shadow-lg scale-105'
       - Inactive: 'bg-white text-neutral-700 hover:bg-neutral-100 border border-neutral-200'

    2. Verify setCategory function updates URL (line 432):
       - Should call updateFilters() which uses navigateTo with replace: true
       - Query param key is 'category'

    3. Verify URL state sync on mount:
       - Filters object initializes from route.query.category (line 400)
       - Page loads with correct category pre-selected from URL

    4. Test active filter display (lines 98-117):
       - Confirm active filters show as removable pills
       - Each pill has X button to clear that filter

    Keep existing location/year filters and sort dropdown as-is (they work correctly).
  </action>
  <verify>Click each category pill, verify URL updates (?category=Marine), reload page with category in URL, verify correct category selected on load, click X on active filter pill to clear</verify>
  <done>Category pills styled with rounded-full, active state shows primary background with scale effect, URL updates with ?category param, filter state survives page reload, active filter pills display with X button</done>
</task>

<task type="auto">
  <name>Verify sorting functionality and results count accuracy</name>
  <files>pages/projects/index.vue</files>
  <action>
    Verify sorting and results display:

    1. Test sortProjects function (lines 458-473):
       - 'newest' sorts by year descending (b.year - a.year)
       - 'oldest' sorts by year ascending (a.year - b.year)
       - 'az' sorts by title localeCompare ascending
       - 'za' sorts by title localeCompare descending

    2. Verify sort dropdown change triggers updateFilters (line 74):
       - @change="updateFilters" should update URL with ?sort param

    3. Verify results count (line 121):
       - Shows filteredProjects.length with proper pluralization
       - Wrapped in aria-live for screen reader announcements

    4. Test empty state (lines 141-144):
       - Shows when filteredProjects.length === 0
       - Displays folder icon and "No projects found" message

    5. Verify grid responsiveness:
       - 1 column on mobile (< 768px)
       - 2 columns on tablet (768px - 1024px)
       - 3 columns on desktop (> 1024px)
  </action>
  <verify>Select each sort option, verify project order changes, check URL updates (?sort=oldest), apply filters and verify results count updates correctly, test on mobile viewport for responsive grid</verify>
  <done>All four sort options work correctly with proper ordering, results count accurately reflects filtered projects, empty state displays when no matches, responsive grid adapts to viewport width</done>
</task>

<task type="auto">
  <name>Implement pagination with 6-12 items per page and URL state</name>
  <files>pages/projects/index.vue</files>
  <action>
    Add pagination to projects listing page:

    1. Add pagination state (after line 283, below viewMode):
       const itemsPerPage = 9
       const currentPage = ref(Number(route.query.page) || 1)

    2. Add computed for paginated projects (after filteredProjects):
       const paginatedProjects = computed(() => {
         const start = (currentPage.value - 1) * itemsPerPage
         const end = start + itemsPerPage
         return filteredProjects.value.slice(start, end)
       })

    3. Add computed for total pages:
       const totalPages = computed(() => Math.ceil(filteredProjects.value.length / itemsPerPage))

    4. Update template to use paginatedProjects instead of filteredProjects in v-for (line ~130)

    5. Add pagination controls between results count and grid (around line 122):
       - Flex container with centered alignment
       - Previous button: disabled when currentPage === 1
       - Page numbers: show range with ellipsis for many pages (e.g., "1 2 3 ... 7")
       - Next button: disabled when currentPage === totalPages
       - Each button is NuxtLink to update URL query param

    6. Update URL when page changes:
       navigateTo({ query: { ...route.query, page: newPage } }, { replace: true })

    7. Reset currentPage to 1 when filters change:
       - In setCategory, setLocation, setYear, setSort functions
       - Add: currentPage.value = 1 before calling updateFilters()

    8. Sync currentPage from URL on mount (line ~400):
       - Already handled by: const currentPage = ref(Number(route.query.page) || 1)
       - Ensure it's reactive to route changes with watch()

    9. Scroll to top of projects section when page changes:
       - Add smooth scroll behavior after page update
  </action>
  <verify>npm run dev, navigate to /projects, verify pagination controls appear, click Next button and verify page increments, verify URL updates (?page=2), apply category filter and verify page resets to 1, verify Previous button disabled on page 1</verify>
  <done>Pagination displays 9 projects per page, prev/next buttons work correctly, page numbers display current position, URL updates with ?page parameter, filter changes reset to page 1, page state persists on reload, smooth scroll to top on page change</done>
</task>

</tasks>

<verification>
1. Build completes without errors: npm run build
2. Grid/list toggle switches layouts and updates URL
3. Category filter pills show active state and update URL
4. Sorting dropdown changes project order immediately
5. Results count updates correctly with filters applied
6. URL state persists across page reloads
7. Responsive grid works on mobile/tablet/desktop
8. Pagination displays 6-12 items per page with controls
9. Pagination controls update URL with ?page parameter
10. Filter changes reset pagination to page 1
</verification>

<success_criteria>
- Projects listing page displays projects in functional grid layout with pagination
- Grid/list view toggle works with smooth transitions
- Category filter buttons styled as pills with active states
- Filter state preserved in URL query parameters
- Sorting options (newest/oldest/a-z/za) work correctly
- Results count accurately reflects filtered projects
- Responsive layout adapts to viewport sizes
- Pagination shows 6-12 items per page with prev/next controls
- Page number updates URL (?page=2) and persists on reload
- Filter changes reset pagination to page 1
</success_criteria>

<output>
After completion, create `.planning/phases/07-section-polish---projects/07-01-SUMMARY.md`
</output>
