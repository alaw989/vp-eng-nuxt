---
phase: 07-section-polish---projects
plan: 04
type: execute
wave: 3
depends_on: ["07-01", "07-02", "07-03"]
files_modified:
  - .planning/phases/07-section-polish---projects/07-04-VERIFICATION.md
autonomous: false

must_haves:
  truths:
    - "Projects listing page visual comparison shows no regressions from baseline"
    - "Project detail page visual comparison shows no regressions from baseline"
    - "Lighthouse audit scores meet minimum thresholds (Performance 85+, SEO 90+, Accessibility 90+)"
    - "All project images load correctly without broken links"
    - "Filtering and sorting functionality works across all category combinations"
    - "Grid/list view toggle preserves filter state"
  artifacts:
    - path: ".planning/phases/07-section-polish---projects/07-04-VERIFICATION.md"
      provides: "Verification report with visual diffs and Lighthouse scores"
      min_lines: 200
  key_links:
    - from: "07-04-VERIFICATION.md"
      to: ".planning/audit/baselines/projects-*.png"
      via: "Baseline image references for comparison"
      pattern: "baselines/projects"
    - from: "07-04-VERIFICATION.md"
      to: "pages/projects/index.vue"
      via: "Listing page verification"
      pattern: "projects/index"
    - from: "07-04-VERIFICATION.md"
      to: "pages/projects/[slug].vue"
      via: "Detail page verification"
      pattern: "projects/\[slug\]"
---

<objective>
Run visual comparison and QA verification for projects section, generate verification report with Lighthouse scores, and confirm no regressions from live site baseline.

Purpose: Final quality gate for Phase 7. Compare current implementation against Phase 1 baseline screenshots to ensure no visual regressions. Run Lighthouse audits to verify performance, SEO, and accessibility standards. Document results in verification report.

Output: Verification report with visual comparisons, Lighthouse scores, and pass/fail determination for each success criterion.
</objective>

<execution_context>
@/home/deck/.claude/get-shit-done/workflows/execute-plan.md
@/home/deck/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@planning/STATE.md
@.planning/phases/07-section-polish---projects/07-CONTEXT.md
@.planning/phases/01-audit-baseline-capture/01-02-SUMMARY.md
@.planning/phases/02-comparison-infrastructure/02-02-SUMMARY.md
@.planning/phases/06-homepage-polish/06-04-VERIFICATION.md
@pages/projects/index.vue
@pages/projects/[slug].vue
</context>

<tasks>

<task type="auto">
  <name>Capture current screenshots for projects pages</name>
  <files>pages/projects/index.vue, pages/projects/[slug].vue</files>
  <action>
    Capture screenshots of projects pages for visual comparison:

    1. Start dev server if not running:
       npm run dev (in background with logging)

    2. Use comparison infrastructure from Phase 2 to capture screenshots:
       - Run: node .planning/scripts/capture-screenshots.js projects
       - Or use Playwright script directly if available

    3. Capture projects listing page at multiple viewports:
       - Mobile: 375x667 (iPhone SE)
       - Tablet: 768x1024 (iPad)
       - Desktop: 1920x1080 (Full HD)
       - Save to: .planning/audit/current/projects-*.png

    4. Capture project detail pages:
       - /projects/tampa-marina-complex
       - /projects/downtown-office-tower
       - /projects/coastal-seawall-system
       - Same viewport variants
       - Save to: .planning/audit/current/projects-detail-*.png

    5. Capture different filter states:
       - Projects listing with category filter active
       - Projects listing in list view mode
       - Different sort orders

    6. Organize screenshots by page and viewport for systematic comparison.
  </action>
  <verify>Screenshots captured in .planning/audit/current/ directory, files exist for all viewports and pages, images are valid PNG files</verify>
  <done>Screenshots captured for projects listing (3 viewports), project details (3 pages x 3 viewports), filter states, list view mode</done>
</task>

<task type="auto">
  <name>Generate visual diff comparisons</name>
  <files>.planning/phases/07-section-polish---projects/07-04-VERIFICATION.md</files>
  <action>
    Generate visual diff comparisons using Phase 2 infrastructure:

    1. Run comparison script:
       node .planning/scripts/compare-screenshots.js projects

    2. Or use odiff-bin directly:
       npx odiff baseline.png current.png diff.png

    3. Compare against Phase 1 baselines:
       - .planning/audit/baselines/projects-*.png
       - Generate diff images for significant changes

    4. Document results in VERIFICATION.md:
       ## Visual Comparison Results

       ### Projects Listing Page
       - Mobile: [PASS/FAIL] - [notes]
       - Tablet: [PASS/FAIL] - [notes]
       - Desktop: [PASS/FAIL] - [notes]

       ### Project Detail Pages
       - tampa-marina-complex: [PASS/FAIL]
       - downtown-office-tower: [PASS/FAIL]
       - coastal-seawall-system: [PASS/FAIL]

       ### Notable Differences
       - Document expected improvements (modernized styling, better spacing)
       - Document any regressions (broken layouts, missing elements)

    5. Generate diff images for review:
       - Save to .planning/audit/diffs/projects-*.png
       - Include in VERIFICATION.md as references
  </action>
  <verify>Diff images generated, VERIFICATION.md created with comparison results, expected improvements documented, any regressions flagged</verify>
  <done>Visual comparisons generated for all pages/viewports, diff images saved to audit/diffs/, VERIFICATION.md documents pass/fail for each comparison</done>
</task>

<task type="checkpoint:human-verify">
  <what-built>Complete projects section with listing page, detail pages, image gallery, filtering, and view toggle</what-built>
  <how-to-verify>
    1. Review visual diff images in .planning/audit/diffs/projects-*.png
    2. Open http://localhost:3000/projects in browser
    3. Test all category filters, verify URL updates
    4. Click grid/list toggle, verify layout changes
    5. Test sort options (newest, oldest, a-z, za)
    6. Navigate to a project detail page
    7. Verify image gallery loads with real images
    8. Click image to open lightbox, test navigation
    9. Verify related projects section shows same-category projects
    10. Check mobile responsiveness (use browser devtools)

    Approve if:
    - Visual quality matches or exceeds baseline
    - No regressions in layout or functionality
    - All images load correctly
    - Responsive design works on all viewports
  </how-to-verify>
  <resume-signal>Type "approved" if everything looks good, or describe issues to address</resume-signal>
</task>

<task type="auto">
  <name>Run Lighthouse audits and document scores</name>
  <files>.planning/phases/07-section-polish---projects/07-04-VERIFICATION.md</files>
  <action>
    Run Lighthouse audits and document results:

    1. Run Lighthouse for projects listing page:
       npx lighthouse http://localhost:3000/projects --output=html --output=json --output-path=.planning/audit/lighthouse/projects-listing

    2. Run Lighthouse for project detail page:
       npx lighthouse http://localhost:3000/projects/tampa-marina-complex --output=html --output=json --output-path=.planning/audit/lighthouse/projects-detail

    3. Extract key scores from JSON reports:
       - Performance (target: 85+)
       - Accessibility (target: 90+)
       - Best Practices (target: 90+)
       - SEO (target: 90+)

    4. Document in VERIFICATION.md:
       ## Lighthouse Audit Results

       ### Projects Listing Page
       - Performance: XX/100
       - Accessibility: XX/100
       - Best Practices: XX/100
       - SEO: XX/100

       ### Project Detail Page
       - Performance: XX/100
       - Accessibility: XX/100
       - Best Practices: XX/100
       - SEO: XX/100

       ### Opportunities
       - List any Lighthouse suggestions for improvement

    5. If scores below targets:
       - Document specific issues
       - Note which future phase should address
  </action>
  <verify>Lighthouse reports generated in .planning/audit/lighthouse/, scores extracted and documented in VERIFICATION.md, any below-target scores noted</verify>
  <done>Lighthouse audits completed for both pages, scores documented in VERIFICATION.md, performance metrics meet minimum thresholds or issues are documented</done>
</task>

<task type="auto">
  <name>Complete verification report with pass/fail summary</name>
  <files>.planning/phases/07-section-polish---projects/07-04-VERIFICATION.md</files>
  <action>
    Complete VERIFICATION.md with final summary:

    1. Review all Phase 7 success criteria:
       [from ROADMAP.md]
       1. Projects listing page displays all projects with proper filtering and card layout
       2. Project detail pages show full content with proper image galleries
       3. All project images migrated and displaying correctly
       4. Category filtering works with URL-based state
       5. Visual comparison shows no regressions from live site baseline

    2. For each criterion, document:
       ## Success Criteria Verification

       1. **Projects listing page displays all projects with proper filtering and card layout**
          - Status: [PASS/FAIL]
          - Evidence: [notes from testing]

       2. **Project detail pages show full content with proper image galleries**
          - Status: [PASS/FAIL]
          - Evidence: [notes from testing]

       [etc for all 5 criteria]

    3. Add final summary section:
       ## Phase 7 Verification Summary

       **Overall Status:** PASS/FAIL

       **Passed:** X/5 criteria
       **Failed:** X/5 criteria

       **Blockers for next phase:**
       - List any failed criteria that must be addressed

    4. Save completed VERIFICATION.md
  </action>
  <verify>VERIFICATION.md contains all sections completed, each criterion has pass/fail status with evidence, overall summary clearly states phase completion status</verify>
  <done>Verification report complete with all success criteria evaluated, pass/fail status documented, overall phase summary provided, any blockers identified</done>
</task>

</tasks>

<verification>
1. Screenshots captured for all projects pages and viewports
2. Visual diffs generated against Phase 1 baselines
3. Lighthouse audits completed with documented scores
4. User approved visual quality via checkpoint
5. All success criteria evaluated in VERIFICATION.md
6. Overall phase status determined (PASS/FAIL)
7. Any regressions or blockers documented
</verification>

<success_criteria>
- Visual comparison shows no regressions (or only improvements)
- Lighthouse Performance >= 85
- Lighthouse Accessibility >= 90
- Lighthouse SEO >= 90
- All success criteria from ROADMAP.md verified
- Verification report complete with pass/fail summary
</success_criteria>

<output>
After completion, create `.planning/phases/07-section-polish---projects/07-04-SUMMARY.md`
</output>
