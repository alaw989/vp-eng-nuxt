---
phase: 22-hero-modernization
plan: 05
type: execute
wave: 3
depends_on: ["22-01", "22-02", "22-03", "22-04"]
files_modified: [pages/index.vue, components/HeroStatic.vue, tests-e2e/hero.spec.ts, .planning/phases/22-hero-modernization/22-hero-modernization-VERIFICATION.md]
autonomous: false

must_haves:
  truths:
    - "Hero displays correctly on mobile (320px - 768px)"
    - "Hero displays correctly on tablet (768px - 1024px)"
    - "Hero displays correctly on desktop (1024px+)"
    - "Typography scales appropriately across breakpoints"
    - "CTA button is touch-friendly (min 44x44px) on mobile"
    - "All accessibility tests pass (Lighthouse, Playwright)"
    - "Performance targets met (LCP < 2.5s, CLS < 0.1)"
  artifacts:
    - path: "pages/index.vue"
      provides: "Homepage with modern hero"
      exports: ["HeroStatic"]
    - path: "tests-e2e/hero.spec.ts"
      provides: "E2E tests for hero functionality"
      min_lines: 50
    - path: ".planning/phases/22-hero-modernization/22-hero-modernization-VERIFICATION.md"
      provides: "Verification checklist and test results"
      contains: "truth verification, test results"
  key_links:
    - from: "tests-e2e/hero.spec.ts"
      to: "pages/index.vue"
      via: "Playwright page tests"
      pattern: "goto.*index|locator.*hero"
    - from: "components/HeroStatic.vue"
      to: "Lighthouse"
      via: "Performance metrics validation"
      pattern: "LCP|CLS|FCP"
---

<objective>
Comprehensive testing and verification of the modernized hero section across devices, browsers, and accessibility standards.

Purpose: Ensure the hero modernization is complete, functional, accessible, and performant across all user scenarios before marking Phase 22 complete.

Output: Verified hero section passing all tests, updated VERIFICATION.md with results, and confidence that the modernization meets quality standards.
</objective>

<execution_context>
@/Users/austinlaw/.claude/get-shit-done/workflows/execute-plan.md
@/Users/austinlaw/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/22-hero-modernization/22-RESEARCH.md
@components/HeroStatic.vue
@pages/index.vue
@.planning/phases/17-accessibility-foundation/17-05-SUMMARY.md
@tests-e2e/accessibility.spec.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create E2E tests for hero functionality</name>
  <files>tests-e2e/hero.spec.ts</files>
  <action>
Create comprehensive E2E tests for the hero section using Playwright:

1. Test file structure:
   ```typescript
   import { test, expect } from '@playwright/test'

   test.describe('Hero Section', () => {
     test.beforeEach(async ({ page }) => {
       await page.goto('/')
     })

     test('should render hero with correct content', async ({ page }) => {
       // Hero section exists
       const hero = page.locator('section').filter({ hasText: 'Trusted by Tampa Bay' })
       await expect(hero).toBeVisible()

       // Headline is h1
       const h1 = page.locator('h1')
       await expect(h1).toContainText(/Trusted by Tampa Bay|Structures That Stand|Tampa Bay's Structural|Precision Structural/)

       // CTA button exists (if shown)
       const cta = page.locator('a[href="/contact"]')
       await expect(cta.first()).toBeVisible()
     })

     test('should not have carousel controls', async ({ page }) => {
       // No navigation arrows
       const arrows = page.locator('button[aria-label*="slide"]').or(
         page.locator('button').filter({ hasText: /previous|next/i })
       )
       await expect(arrows).toHaveCount(0)

       // No dot indicators
       const dots = page.locator('button[aria-label*="Go to slide"]')
       await expect(dots).toHaveCount(0)

       // No progress bar
       const progressBar = page.locator('[role="progressbar"]')
       await expect(progressBar).toHaveCount(0)
     })

     test('should have accessible heading structure', async ({ page }) => {
       // Single h1 in hero
       const h1s = page.locator('h1')
       await expect(h1s).toHaveCount(1)

       // h1 contains main value proposition
       const h1 = h1s.first()
       await expect(h1).toBeVisible()
       const h1Text = await h1.textContent()
       expect(h1Text?.length).toBeGreaterThan(10) // Not empty
       expect(h1Text?.length).toBeLessThan(100) // Not too long
     })

     test('should have accessible CTA button', async ({ page }) => {
       const cta = page.locator('a[href="/contact"]').first()

       // Visible focus indicator
       await cta.focus()
       await expect(cta).toHaveCSS('outline', /./)

       // Accessible name
       const ctaText = await cta.textContent()
       expect(ctaText?.length).toBeGreaterThan(0)
     })

     test('should have proper image alt text', async ({ page }) => {
       const images = page.locator('section img').first()
       await expect(images).toHaveAttribute('alt', /./)
       const alt = await images.getAttribute('alt')
       expect(alt?.length).toBeGreaterThan(10)
       expect(alt?.length).toBeLessThan(125)
     })
   })
   ```

2. Responsive tests:
   ```typescript
   test.describe('Hero Responsive', () => {
     test('should display correctly on mobile', async ({ page }) => {
       await page.setViewportSize({ width: 375, height: 667 })
       await page.goto('/')

       const hero = page.locator('section').first()
       await expect(hero).toBeVisible()

       // Text is readable (not overlapping)
       const h1 = page.locator('h1')
       const h1Box = await h1.boundingBox()
       expect(h1Box?.width).toBeLessThan(350) // Fits with padding
     })

     test('should display correctly on tablet', async ({ page }) => {
       await page.setViewportSize({ width: 768, height: 1024 })
       await page.goto('/')

       const hero = page.locator('section').first()
       await expect(hero).toBeVisible()
     })

     test('should display correctly on desktop', async ({ page }) => {
       await page.setViewportSize({ width: 1920, height: 1080 })
       await page.goto('/')

       const hero = page.locator('section').first()
       await expect(hero).toBeVisible()
     })
   })
   ```

3. Animation tests:
   ```typescript
   test('should respect prefers-reduced-motion', async ({ page }) => {
     // Enable reduced motion
     await page.emulateMedia({ reducedMotion: 'reduce' })
     await page.goto('/')

     // Parallax should be disabled (no transform on scroll)
     const initialTransform = await page.locator('section img').first().evaluate(el => {
       return window.getComputedStyle(el).transform
     })

     await page.mouse.wheel(0, 100)
     await page.waitForTimeout(100)

     const afterScrollTransform = await page.locator('section img').first().evaluate(el => {
       return window.getComputedStyle(el).transform
     })

     // Transform should not change (parallax disabled)
     expect(initialTransform).toBe(afterScrollTransform)
   })
   ```

4. Run tests:
   ```bash
   npx playwright test tests-e2e/hero.spec.ts
   ```
  </action>
  <verify>
1. tests-e2e/hero.spec.ts file exists with 8-10 tests
2. All tests pass: npx playwright test tests-e2e/hero.spec.ts
3. Tests cover: content, no-carousel, accessibility, responsive, reduced-motion
  </verify>
  <done>E2E test suite created for hero functionality and accessibility</done>
</task>

<task type="auto">
  <name>Task 2: Run performance audits and accessibility tests</name>
  <files>components/HeroStatic.vue, pages/index.vue</files>
  <action>
Execute comprehensive performance and accessibility testing:

1. Lighthouse performance audit:
   ```bash
   # Install Lighthouse CI if needed
   npm install -g @lhci/cli

   # Run Lighthouse on homepage
   lhci autorun --collect.url=http://localhost:3000
   ```

   Target metrics:
   - LCP (Largest Contentful Paint): < 2.5s (Good)
   - FID (First Input Delay): < 100ms (Good)
   - CLS (Cumulative Layout Shift): < 0.1 (Good)
   - Performance score: 90+

2. Accessibility audit:
   ```bash
   # Run axe-core via @nuxt/a11y (already installed)
   npm run dev
   # Check console for a11y warnings
   ```

   Or use Lighthouse accessibility:
   - Accessibility score: 90+
   - No axe violations
   - Color contrast ratio: 4.5:1 for text

3. Manual accessibility testing:
   - Keyboard navigation: Tab through page, focus visible on all interactive elements
   - Screen reader: Test with VoiceOver (macOS) or NVDA (Windows)
   - Reduced motion: Enable OS preference, verify animations disabled

4. Cross-browser testing:
   - Chrome: Primary testing browser
   - Firefox: Verify layout and animations
   - Safari: Test on macOS/iOS
   - Edge: Verify Chrome parity

5. Mobile device testing (if available):
   - Test on actual mobile device (iOS Safari, Android Chrome)
   - Verify touch targets are 44x44px minimum
   - Check text readability at actual size

6. Page speed test:
   ```bash
   # Build production bundle
   npm run build

   # Check bundle size
   ls -lh .output/public/_nuxt/
   ```

   Target:
   - Hero image: < 200KB
   - Hero component JS: < 50KB
   - Total page JS: No significant increase from hero changes
  </action>
  <verify>
1. Lighthouse Performance score 90+ (LCP < 2.5s, CLS < 0.1)
2. Lighthouse Accessibility score 90+ (no color contrast issues)
3. All E2E tests pass
4. Manual a11y testing: keyboard navigation works, screen reader announces content
  </verify>
  <done>Performance and accessibility audits completed with passing scores</done>
</task>

<task type="auto">
  <name>Task 3: Create verification document with results</name>
  <files>.planning/phases/22-hero-modernization/22-hero-modernization-VERIFICATION.md</files>
  <action>
Create comprehensive verification document:

1. Document structure:
   ```markdown
   # Phase 22: Hero Modernization - Verification

   **Verified:** 2026-02-07
   **Status:** PASSED / FAILED

   ## Success Criteria Verification

   ### HERO-01: Modern Visual Design
   - [ ] Hero uses static design (no carousel)
   - [ ] Bold typography (big type trend)
   - [ ] Modern gradient overlays
   - [ ] High-quality background image
   **Status:** PASS / FAIL
   **Notes:** [Details]

   ### HERO-02: Clear Messaging
   - [ ] Headline communicates value proposition
   - [ ] Messaging specific to VP Associates (not generic)
   - [ ] Headline 5-7 words
   - [ ] CTA action-oriented (not "Learn More")
   **Status:** PASS / FAIL
   **Notes:** [Selected variant, copy details]

   ### HERO-03: Polished Interactions
   - [ ] Smooth entrance animations
   - [ ] Subtle parallax effect
   - [ ] CTA hover effects
   - [ ] Animations respect reduced motion
   **Status:** PASS / FAIL
   **Notes:** [Animation details]

   ### HERO-04: Mobile Performance
   - [ ] Responsive layout (320px - 1920px)
   - [ ] Touch-friendly CTA (44x44px min)
   - [ ] Text readable on mobile
   - [ ] No horizontal scroll
   **Status:** PASS / FAIL
   **Notes:** [Breakpoint details]

   ### HERO-05: Accessibility Maintained
   - [ ] h1 heading present
   - [ ] Alt text on images
   - [ ] Focus indicators visible
   - [ ] Reduced motion supported
   - [ ] Color contrast WCAG AA
   **Status:** PASS / FAIL
   **Notes:** [A11y details]

   ## Performance Results

   ### Lighthouse Scores
   - Performance: XX/100
   - Accessibility: XX/100
   - Best Practices: XX/100
   - SEO: XX/100

   ### Core Web Vitals
   - LCP: X.Xs (target: < 2.5s)
   - FID: Xms (target: < 100ms)
   - CLS: X.XX (target: < 0.1)

   ### Image Optimization
   - Hero image size: XX KB
   - Format: WebP
   - Responsive variants: [640w, 1024w, 1920w]

   ## Test Results

   ### E2E Tests
   - Total tests: X
   - Passed: X
   - Failed: X
   - Skipped: X

   ### Accessibility Tests
   - axe violations: 0
   - Color contrast issues: 0
   - Keyboard navigation: PASS
   - Screen reader: PASS

   ## Comparison to Research Recommendations

   ### Research Priority 1: Replace Carousel with Static Hero
   - [ ] Implemented (HeroStatic replaces HeroSlider)
   - Status: COMPLETE

   ### Research Priority 2: Bold Headline
   - [ ] Variant selected: [A/B/C/D]
   - Headline: "[Actual headline text]"
   Status: COMPLETE

   ### Research Priority 3: Modernize Imagery
   - [ ] Local/regional image used
   - [ ] WebP format
   - [ ] Optimized file size
   Status: COMPLETE

   ### Research Priority 4: Video (Optional)
   - Status: SKIPPED (static image chosen per research guidance)

   ### Research Priority 5: Simplify CTAs
   - [ ] CTA: "[Actual CTA text]"
   - Status: COMPLETE

   ## Known Issues

   [List any issues found during testing]

   ## Recommendations

   [Optional future improvements]

   ## Sign-off

   **Verified by:** Claude Executor
   **Date:** 2026-02-07
   **Phase Status:** READY FOR CLOSE
   ```

2. Fill in all sections with actual test results

3. Attach screenshots (optional):
   - Mobile viewport (375px)
   - Tablet viewport (768px)
   - Desktop viewport (1920px)
   - Lighthouse report screenshot

4. Save verification document
  </action>
  <verify>
1. VERIFICATION.md exists in phase directory
2. All success criteria checked (PASS/FAIL)
3. Test results documented
4. Performance scores recorded
  </verify>
  <done>Comprehensive verification document created with test results</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete hero modernization with comprehensive testing</what-built>
  <how-to-verify>
1. Review verification document (.planning/phases/22-hero-modernization/22-hero-modernization-VERIFICATION.md)

2. Visual verification across viewports:
   - Mobile: 375px width
   - Tablet: 768px width
   - Desktop: 1920px width

3. Functional verification:
   - Hero displays correctly (no layout issues)
   - No carousel controls visible
   - Text is bold and prominent
   - CTA button works

4. Accessibility verification:
   - Tab through: focus visible on CTA
   - Reduced motion: animations disabled
   - Lighthouse a11y score 90+

5. Performance verification:
   - Lighthouse performance score 90+
   - LCP < 2.5s
   - CLS < 0.1

6. Final approval:
   - Does the hero look modern and professional?
   - Does it communicate VP Associates' value proposition?
   - Is it an improvement over the carousel?
   - Any issues or concerns?

If issues found:
- Document in VERIFICATION.md "Known Issues" section
- Create gap closure plans if needed
- Otherwise approve phase completion
  </how-to-verify>
  <resume-signal>Type "approved" to close Phase 22, or describe issues that need gap closure plans</resume-signal>
</task>

</tasks>

<verification>
After all tasks complete and user approval:
- [ ] E2E tests created and passing (8-10 tests)
- [ ] Lighthouse scores: Performance 90+, Accessibility 90+
- [ ] Core Web Vitals: LCP < 2.5s, CLS < 0.1
- [ ] Manual testing: keyboard nav, screen reader, reduced motion work
- [ ] Responsive design: mobile, tablet, desktop all working
- [ ] VERIFICATION.md complete with all test results
- [ ] User approved final implementation
</verification>

<success_criteria>
1. Hero modernization complete and tested
2. All accessibility standards met (WCAG 2.1 AA)
3. Performance targets achieved (LCP < 2.5s, CLS < 0.1)
4. Responsive design works across all breakpoints
5. User approved the final implementation
6. Verification documents complete
</success_criteria>

<output>
After completion, create `.planning/phases/22-hero-modernization/22-05-SUMMARY.md`
</output>
